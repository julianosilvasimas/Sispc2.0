
  <div class="card card-w-title" style=" margin-left: 3px" >
    <h4>EDITAR INDICADORES</h4>
   <div class="ui-g-6 ui-md-12" >
      <div class="ui-g-12 ui-md-2">
        <span class="md-inputfield">
          <p-calendar [(ngModel)]="filtroData" view="month" dateFormat="mm/yy" [yearNavigator]="true" yearRange="2000:2030" [readonlyInput]="true"></p-calendar>
          <label>Referencia</label>
        </span>
      </div>
      <div class="ui-g-12 ui-md-2">
        <span class="md-inputfield">

          <p-dropdown [options]="filtroListaIndicador" optionLabel="indicador" filterBy="label,filtroListaIndicador.indicador" 
          [autoWidth]="true" [(ngModel)]="filtroIndicador"  placeholder="." styleClass = "drop95" 
          filter="true" [showClear]="true" ></p-dropdown>

          <label>Indicador</label>
        </span>
      </div>
      <div class="ui-g-12 ui-md-6">
        <button pButton type="button" icon="pi pi-search" (click)="atualizar()"></button>
      </div>
    </div>
    <div style=" margin-top: 60px"></div>
  </div>


  <p-dialog header="Editar" [(visible)]="ListaOk" [responsive]="false"  showEffect="fade" [modal]="true" [style]="{ height: '95%', width: '95%'}"  (onAfterHide)="onDialogHide()">
    <p-table [value]="listaCompleta" dataKey="vin" editMode="row" [paginator]="true" [rows]="13" > 
      <ng-template pTemplate="header">
        <tr>
            <th>DataIndicador</th>
            <th>DataReferencia</th>
            <th>Orçado</th>
            <th>Realizado</th>
            <th>Mínimo</th>
            <th>Máximo</th>
            <th>Meta</th>
            <th>DP Regulado</th>
            <th>DP Não Regulado</th>
            <th>Forecast</th>
            <th>Forecast2</th>
            <th>Forecast3</th>
            <th>Previsão</th>
            <th style="width:8em"></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex">
        <tr [pEditableRow]="rowData">
            <td>
                {{rowData.dataindicador}}
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                      <p-calendar [(ngModel)]="rowData.datareferencia" view="month" dateFormat="yy-mm-dd" dateFormat="yy-mm-dd" [yearNavigator]="true" yearRange="2000:2030" [readonlyInput]="true"></p-calendar>
                    </ng-template>
                    <ng-template pTemplate="output">{{rowData.datareferencia}}</ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="number" [(ngModel)]="rowData.orcado">
                    </ng-template>
                    <ng-template pTemplate="output">{{rowData.orcado}}</ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="number" [(ngModel)]="rowData.realizado">
                    </ng-template>
                    <ng-template pTemplate="output">{{rowData.realizado}}</ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="number" [(ngModel)]="rowData.minimo">
                    </ng-template>
                    <ng-template pTemplate="output">{{rowData.minimo}}</ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="number" [(ngModel)]="rowData.maximo">
                    </ng-template>
                    <ng-template pTemplate="output">{{rowData.maximo}}</ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="number" [(ngModel)]="rowData.meta">
                    </ng-template>
                    <ng-template pTemplate="output">{{rowData.meta}}</ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="number" [(ngModel)]="rowData.dentroprazoreg">
                    </ng-template>
                    <ng-template pTemplate="output">{{rowData.dentroprazoreg}}</ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="number" [(ngModel)]="rowData.dentroprazo">
                    </ng-template>
                    <ng-template pTemplate="output">{{rowData.dentroprazo}}</ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="number" [(ngModel)]="rowData.forecast">
                    </ng-template>
                    <ng-template pTemplate="output">{{rowData.forecast}}</ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="number" [(ngModel)]="rowData.forecast2">
                    </ng-template>
                    <ng-template pTemplate="output">{{rowData.forecast2}}</ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="number" [(ngModel)]="rowData.forecast3">
                    </ng-template>
                    <ng-template pTemplate="output">{{rowData.forecast3}}</ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="number" [(ngModel)]="rowData.previsao">
                    </ng-template>
                    <ng-template pTemplate="output">{{rowData.previsao}}</ng-template>
                </p-cellEditor>
            </td>
            <td style="text-align:center">
              <button *ngIf="!editing" pButton type="button" pInitEditableRow icon="pi pi-info" class="ui-button-info"></button>
              <button *ngIf="editing" pButton type="button" pSaveEditableRow icon="pi pi-check" class="ui-button-success" (click)="onRowEditSave(rowData)" style="margin-right: .5em"></button>
              </td>
        </tr>
      </ng-template>
    </p-table>
    <div class="ui-g-12 ui-md-12" >
      <div class="ui-g-12 ui-md-6"  align="center">
        <button pButton type="button" label="Cancelar" (click)="CancelarAlteracoes()"></button>
      </div>
      <div class="ui-g-12 ui-md-6"  align="center">
        <button pButton type="button" label="Aprovar Alterações" (click)="SolicitarAlteracao()"></button>
      </div>
    </div>
    
  </p-dialog>


  <div *ngIf="ListaParaEnviar" showEffect="fade">
    <p-table [value]="listaAlterada" editMode="row" [paginator]="true" [rows]="15" [reorderableColumns]="true"> 
      <ng-template pTemplate="header">
        <tr>
            <th>DataReferencia</th>
            <th>DataIndicador</th>
            <th>Orçado</th>
            <th>Realizado</th>
            <th>Mínimo</th>
            <th>Máximo</th>
            <th>Meta</th>
            <th>DP Regulado</th>
            <th>DP Não Regulado</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex">
        <tr [pEditableRow]="rowData"  [ngClass]="new-car">
            <td>{{rowData.dataindicador}}</td>
            <td>{{rowData.datareferencia}}</td>
            <td>{{rowData.orcado}}</td>
            <td>{{rowData.realizado}}</td>
            <td>{{rowData.minimo}}</td>
            <td>{{rowData.maximo}}</td>
            <td>{{rowData.meta}}</td>
            <td>{{rowData.dentroprazoreg}}</td>
            <td>{{rowData.dentroprazo}}</td>
        </tr>
      </ng-template>
    </p-table>
    <div *ngIf="CarregarVisible" showEffect="fade" >
      <h3 class="first">Carregando</h3>
      <p-progressBar [value]="porcentagemconcluido"></p-progressBar>
    </div>
    <div class="ui-g-12 ui-md-12"  align="center">
      <button pButton type="button" label="Aprovar Alterações" (click)="AprovarAlteracoes()"></button>
    </div>
  </div>    
